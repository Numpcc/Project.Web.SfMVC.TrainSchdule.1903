(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c8046bf0"],{"08cd":function(t,e,a){"use strict";var s=a("9d36"),n=a.n(s);n.a},1136:function(t,e,a){"use strict";var s=a("123f"),n=a.n(s);n.a},"123f":function(t,e,a){},"48ba":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"application-list"},[a("el-card",[a("div",{staticClass:"layout row justify-space-between px-2 pb-3"},[a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{icon:"el-icon-search",type:"primary"},on:{click:t.emitRefresh}},[t._v("刷新")]),t._v(" "),a("div",[t._t("headeraction"),t._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{loading:t.downloadLoading,icon:"el-icon-download",type:"primary"},on:{click:t.handleDownload}},[t._v("导出")])],2)],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.onLoading,expression:"onLoading"}],key:t.tableKey,staticStyle:{width:"100%"},attrs:{data:t.formatedList,border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{label:"申请人","min-width":"120px"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[a("el-button",{attrs:{plain:"",size:"mini",type:"info"},on:{click:function(e){return t.handleDetail(s,s.id)}}},[a("i",{staticClass:"el-icon-info blue--text"}),t._v(" "),a("span",{staticClass:"info--text"},[t._v(t._s(s.base.realName))])])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"单位","min-width":"130px"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[a("span",{staticClass:"caption"},[t._v(t._s(s.base.companyName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"创建时间",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.create))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"申请离队时间",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.stampLeave))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"预计归队时间",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.stampReturn))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"状态",width:"110px"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[a("el-tag",{staticClass:"white--text",attrs:{color:s.statusColor,size:"mini"}},[t._v(t._s(s.statusDesc))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center","class-name":"small-padding fixed-width",fixed:"right",label:"操作",width:"330"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[t.myUserid?t._t("action",null,{applyid:s.id,row:s}):a("span",[t._v("请先登录")])]}}],null,!0)})],1)],1),t._v(" "),a("el-dialog",{attrs:{visible:t.detailDrawer.show,"custom-class":"p-fixed f-right apply-detail",title:"详情",top:"0",width:"408px"},on:{"update:visible":function(e){return t.$set(t.detailDrawer,"show",e)}}},[a("ApplicationDetail",{attrs:{"apply-id":t.detailDrawer.id,basic:t.detailDrawer.basic,detail:t.detailDrawer.data},scopedSlots:t._u([{key:"action",fn:function(e){var s=e.applyid,n=e.row;return t.myUserid?t._t("action",null,{applyid:s,row:n}):a("span",[t._v("请先登录")])}}],null,!0)})],1)],1)},n=[],i=(a("4453"),a("a7ca")),r=a("5aa0"),c=a("6bf2"),l=a.n(c),o=a("c9ee"),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-card",{staticClass:"application-detail",attrs:{"body-style":{padding:"0px"}}},[a("div",{staticClass:"applyinfo-card"},[a("div",{staticClass:"applyinfo-no caption py-2"},[t._v("\n      创建于.\n      "),a("span",{staticClass:"font-weight-thin"},[t._v(t._s(t.basic.create))])]),t._v(" "),a("div",{staticClass:"row layout justify-start"},[a("div",{staticClass:"applyinfo-avatar"},[a("i",{staticClass:"el-icon-user-solid"})]),t._v(" "),a("div",{staticClass:"applyinfo-content"},[a("div",{staticClass:"applyinfo-content-title"},[t._v("\n          "+t._s(t.basic.base.realName)+"\n          "),a("el-tag",{staticClass:"ml-2",attrs:{size:"mini",type:"info"}},[t._v(t._s(t.basic.base.dutiesName))])],1),t._v(" "),a("div",{staticClass:"applyinfo-content-subtitle text-truncate",attrs:{title:t.basic.base.companyName}},[t._v(t._s(t.basic.base.companyName))])])]),t._v(" "),a("div",{staticClass:"applyinfo-footer pa-2"},[a("div",{staticClass:"layout row justify-space-between"},[a("el-tag",{attrs:{type:"info"}},[t._v(t._s(t.basic.statusDesc))])],1)])]),t._v(" "),a("div",{staticClass:"apply-detail-list"},[a("div",{staticClass:"h-88 dark"}),t._v(" "),a("div",{staticClass:"padding-top-80"},[t.requestInfo?a("div",[a("el-row",{staticClass:"py-2 px-3 white"},[a("div",{staticClass:"applyinfo-list-title"},[t._v("休假类型")]),t._v(" "),a("div",{staticClass:"applyinfo-list-subtitle"},[t._v(t._s(t.requestInfo.type))])]),t._v(" "),a("div",{staticClass:"row layout justify-space-between applyinfo-duration"},[a("span",{},[t._v("休假时长")]),t._v(" "),a("span",{staticClass:"caption"},[a("span",{staticClass:"title"},[t._v(t._s(t.requestInfo.onTripLength))]),t._v("\n            天\n          ")])]),t._v(" "),a("el-row",{staticClass:"py-2 mx-2 mb-2 px-2 white el-row"},[a("div",{staticClass:"applyinfo-list-title"},[t._v("理由")]),t._v(" "),a("div",{staticClass:"applyinfo-list-subtitle"},[t._v(t._s(t.requestInfo.reason))])]),t._v(" "),a("el-row",{staticClass:"py-2 mx-2 mb-2 px-2 white el-row"},[a("div",{staticClass:"applyinfo-list-title"},[t._v("休假目的地")]),t._v(" "),a("div",{staticClass:"applyinfo-list-subtitle"},[t._v(t._s(t.requestInfo.vocationPlace.name))])]),t._v(" "),a("el-row",{staticClass:"py-2 mx-2 mb-2 px-2 white el-row"},[a("div",{staticClass:"applyinfo-list-title"},[t._v("申请离队时间")]),t._v(" "),a("div",{staticClass:"applyinfo-list-subtitle"},[t._v(t._s(t.requestInfo.stampLeave))])]),t._v(" "),a("el-row",{staticClass:"py-2 mx-2 mb-2 px-2 white el-row"},[a("div",{staticClass:"applyinfo-list-title"},[t._v("预计归队时间")]),t._v(" "),a("div",{staticClass:"applyinfo-list-subtitle"},[t._v(t._s(t.requestInfo.stampReturn))])])],1):t._e(),t._v(" "),a("el-row",{staticClass:"py-2 px-3 my-2"},[a("div",{staticClass:"applyinfo-list-title"},[t._v("审核流程")]),t._v(" "),a("el-steps",{staticClass:"pa-2",attrs:{active:t.activedProcess,direction:"vertical"}},t._l(t.response,function(e){return a("el-step",{key:e.companyName,attrs:{"finish-status":"success"}},[a("div",{staticClass:"audit-process-card",attrs:{slot:"description"},slot:"description"},[a("div",{staticClass:"audit-process-status"},[a("span",[t._v(t._s(1==e.status?"通过":"驳回或尚未处理"))])]),t._v(" "),a("div",{staticClass:"audit-process-companyName"},[a("span",[t._v(t._s(e.companyName))])]),t._v(" "),a("div",{staticClass:"row layout justify-space-around"},[a("span",{staticClass:"audit-process-person"},[t._v(t._s(e.auditingUserRealName))]),t._v(" "),a("span",{staticClass:"audit-process-handleStamp"},[t._v(t._s(e.handleStamp))])]),t._v(" "),a("div",{staticClass:"audit-process-remark"},[a("span",[t._v(t._s(e.remark))])])])])}),1)],1)],1)]),t._v(" "),a("div",{staticClass:"apply-detail-action"},[a("div",{staticClass:"layout row justify-center"},[t._t("action",null,{applyid:t.applyId,row:t.basic})],2)])])},u=[],p=(a("a1d1"),{name:"ApplicationDetail",props:{basic:{type:Object,default:function(){return{}}},applyId:{type:String,default:null},detail:{type:Object,default:function(){return{}}}},data:function(){return{}},computed:{response:function(){return this.detail.response},requestInfo:function(){return this.detail.requestInfo},activedProcess:function(){var t=this.basic.nowAuditCompany,e=this.response,a=e.findIndex(function(e){return e.companyName===t});return a+1<1?-1:a+1}}}),f=p,v=(a("1136"),a("17cc")),b=Object(v["a"])(f,d,u,!1,null,null,null),m=b.exports,j=(a("8d41"),"@@wavesContext");function y(t,e){function a(a){var s=Object.assign({},e.value),n=Object.assign({ele:t,type:"hit",color:"rgba(0, 0, 0, 0.15)"},s),i=n.ele;if(i){i.style.position="relative",i.style.overflow="hidden";var r=i.getBoundingClientRect(),c=i.querySelector(".waves-ripple");switch(c?c.className="waves-ripple":(c=document.createElement("span"),c.className="waves-ripple",c.style.height=c.style.width=Math.max(r.width,r.height)+"px",i.appendChild(c)),n.type){case"center":c.style.top=r.height/2-c.offsetHeight/2+"px",c.style.left=r.width/2-c.offsetWidth/2+"px";break;default:c.style.top=(a.pageY-r.top-c.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",c.style.left=(a.pageX-r.left-c.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return c.style.backgroundColor=n.color,c.className="waves-ripple z-active",!1}}return t[j]?t[j].removeHandle=a:t[j]={removeHandle:a},a}var h={bind:function(t,e){t.addEventListener("click",y(t,e),!1)},update:function(t,e){t.removeEventListener("click",t[j].removeHandle,!1),t.addEventListener("click",y(t,e),!1)},unbind:function(t){t.removeEventListener("click",t[j].removeHandle,!1),t[j]=null,delete t[j]}},_=function(t){t.directive("waves",h)};window.Vue&&(window.waves=h,Vue.use(_)),h.install=_;var w=h,g=a("ed08");l.a.locale("zh-cn");var C={name:"ApplicationList",directives:{waves:w},components:{ApplicationDetail:m},props:{dataList:{type:Array,default:function(){return[]}},onLoading:{type:Boolean,default:!1}},data:function(){return{tableKey:0,detailDrawer:{show:!1,data:null,basic:null,id:null},list:[],listLoading:!0,listQuery:{status:void 0,userid:"",company:""},statusOptions:{},downloadLoading:!1}},computed:{formatedList:function(){var t=this.statusOptions;return this.dataList.map(function(e){var a=Object.assign({},e),s=t[a.status];return a.statusDesc=s?s.desc:"不明类型",a.statusColor=s?s.color:"white",a.stampLeave=l()(a.stampLeave).format("LLLL"),a.stampReturn=l()(a.stampReturn).format("LLLL"),a.create=Object(r["format"])(a.create,"zh_CN"),a})},myUserid:function(){return this.$store.state.user.userid}},created:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getAllStatus();case 2:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),methods:{getAllStatus:function(){var t=this;return Object(o["e"])().then(function(e){e.list&&(t.statusOptions=e.list)})},handleDetail:function(t,e){var a=this;Object(o["b"])(e).then(function(s){s&&(a.detailDrawer.show=!0,a.detailDrawer.data=s,a.detailDrawer.basic=t,a.detailDrawer.id=e)})},handleDownload:function(){var t=this;this.downloadLoading=!0,Promise.all([a.e("chunk-38b1c389"),a.e("chunk-58293907")]).then(a.bind(null,"4bf8d")).then(function(e){var a=["timestamp","title","type","importance","status"],s=["timestamp","title","type","importance","status"],n=t.formatJson(s,t.list);e.export_json_to_excel({header:a,data:n,filename:"table-list"}),t.downloadLoading=!1})},formatJson:function(t,e){return e.map(function(e){return t.map(function(t){return"timestamp"===t?Object(g["d"])(e[t]):e[t]})})},emitRefresh:function(){this.$emit("refresh")}}},k=C,x=(a("08cd"),Object(v["a"])(k,s,n,!1,null,null,null));e["a"]=x.exports},"77d2":function(t,e,a){var s={"./af":"fbac","./af.js":"fbac","./ar":"f96f","./ar-dz":"e63c","./ar-dz.js":"e63c","./ar-kw":"b7bd","./ar-kw.js":"b7bd","./ar-ly":"968f","./ar-ly.js":"968f","./ar-ma":"9f9d","./ar-ma.js":"9f9d","./ar-sa":"aea5","./ar-sa.js":"aea5","./ar-tn":"d44b","./ar-tn.js":"d44b","./ar.js":"f96f","./az":"c7ed","./az.js":"c7ed","./be":"5a28","./be.js":"5a28","./bg":"1251","./bg.js":"1251","./bm":"2809","./bm.js":"2809","./bn":"b4fc","./bn.js":"b4fc","./bo":"5484","./bo.js":"5484","./br":"5adc","./br.js":"5adc","./bs":"ac10","./bs.js":"ac10","./ca":"e381","./ca.js":"e381","./cs":"aef2","./cs.js":"aef2","./cv":"6566","./cv.js":"6566","./cy":"1390","./cy.js":"1390","./da":"1ece","./da.js":"1ece","./de":"5f10","./de-at":"09c4","./de-at.js":"09c4","./de-ch":"89a2","./de-ch.js":"89a2","./de.js":"5f10","./dv":"e662","./dv.js":"e662","./el":"196b","./el.js":"196b","./en-SG":"0a32","./en-SG.js":"0a32","./en-au":"94ed","./en-au.js":"94ed","./en-ca":"2806","./en-ca.js":"2806","./en-gb":"b0dd","./en-gb.js":"b0dd","./en-ie":"7a6e","./en-ie.js":"7a6e","./en-il":"1f0f","./en-il.js":"1f0f","./en-nz":"1606","./en-nz.js":"1606","./eo":"f214","./eo.js":"f214","./es":"7d58","./es-do":"737b","./es-do.js":"737b","./es-us":"a894","./es-us.js":"a894","./es.js":"7d58","./et":"a888","./et.js":"a888","./eu":"1357","./eu.js":"1357","./fa":"0a48","./fa.js":"0a48","./fi":"c2b1","./fi.js":"c2b1","./fo":"52c4","./fo.js":"52c4","./fr":"04e6","./fr-ca":"6ad1","./fr-ca.js":"6ad1","./fr-ch":"b12f","./fr-ch.js":"b12f","./fr.js":"04e6","./fy":"ad13","./fy.js":"ad13","./ga":"369e","./ga.js":"369e","./gd":"22de","./gd.js":"22de","./gl":"f808","./gl.js":"f808","./gom-latn":"50d5","./gom-latn.js":"50d5","./gu":"e67a","./gu.js":"e67a","./he":"037c","./he.js":"037c","./hi":"3d53","./hi.js":"3d53","./hr":"678b","./hr.js":"678b","./hu":"1783","./hu.js":"1783","./hy-am":"2873","./hy-am.js":"2873","./id":"de99","./id.js":"de99","./is":"6aa2","./is.js":"6aa2","./it":"1f93","./it-ch":"2db9","./it-ch.js":"2db9","./it.js":"1f93","./ja":"6bf8","./ja.js":"6bf8","./jv":"6e55","./jv.js":"6e55","./ka":"e65f","./ka.js":"e65f","./kk":"7167","./kk.js":"7167","./km":"4668","./km.js":"4668","./kn":"e3d2","./kn.js":"e3d2","./ko":"b058","./ko.js":"b058","./ku":"017e","./ku.js":"017e","./ky":"b2bd","./ky.js":"b2bd","./lb":"e50c","./lb.js":"e50c","./lo":"ca14","./lo.js":"ca14","./lt":"3e84","./lt.js":"3e84","./lv":"ce1d","./lv.js":"ce1d","./me":"9d38","./me.js":"9d38","./mi":"3e2e","./mi.js":"3e2e","./mk":"d532","./mk.js":"d532","./ml":"db61","./ml.js":"db61","./mn":"7493","./mn.js":"7493","./mr":"52d8","./mr.js":"52d8","./ms":"b559","./ms-my":"7462","./ms-my.js":"7462","./ms.js":"b559","./mt":"c055","./mt.js":"c055","./my":"49e0","./my.js":"49e0","./nb":"eb1c","./nb.js":"eb1c","./ne":"0acb","./ne.js":"0acb","./nl":"7497","./nl-be":"3114","./nl-be.js":"3114","./nl.js":"7497","./nn":"9a9c","./nn.js":"9a9c","./pa-in":"c595","./pa-in.js":"c595","./pl":"801c","./pl.js":"801c","./pt":"5b08","./pt-br":"155f","./pt-br.js":"155f","./pt.js":"5b08","./ro":"05fc","./ro.js":"05fc","./ru":"90b3","./ru.js":"90b3","./sd":"99bf","./sd.js":"99bf","./se":"20d6","./se.js":"20d6","./si":"7c0b","./si.js":"7c0b","./sk":"90fc","./sk.js":"90fc","./sl":"871b","./sl.js":"871b","./sq":"b045","./sq.js":"b045","./sr":"ac81","./sr-cyrl":"a2d0","./sr-cyrl.js":"a2d0","./sr.js":"ac81","./ss":"b093","./ss.js":"b093","./sv":"12e5","./sv.js":"12e5","./sw":"38a0","./sw.js":"38a0","./ta":"a462","./ta.js":"a462","./te":"18cb","./te.js":"18cb","./tet":"0c11","./tet.js":"0c11","./tg":"d707","./tg.js":"d707","./th":"883f","./th.js":"883f","./tl-ph":"6cc0","./tl-ph.js":"6cc0","./tlh":"ab53","./tlh.js":"ab53","./tr":"e523","./tr.js":"e523","./tzl":"b192","./tzl.js":"b192","./tzm":"5604","./tzm-latn":"9f95","./tzm-latn.js":"9f95","./tzm.js":"5604","./ug-cn":"9f4f","./ug-cn.js":"9f4f","./uk":"8bd6","./uk.js":"8bd6","./ur":"9a78","./ur.js":"9a78","./uz":"4d4c","./uz-latn":"da73","./uz-latn.js":"da73","./uz.js":"4d4c","./vi":"b766","./vi.js":"b766","./x-pseudo":"2a69","./x-pseudo.js":"2a69","./yo":"fd2e","./yo.js":"fd2e","./zh-cn":"35d0","./zh-cn.js":"35d0","./zh-hk":"7b45","./zh-hk.js":"7b45","./zh-tw":"fa66","./zh-tw.js":"fa66"};function n(t){var e=i(t);return a(e)}function i(t){var e=s[t];if(!(e+1)){var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}return e}n.keys=function(){return Object.keys(s)},n.resolve=i,t.exports=n,n.id="77d2"},"8d41":function(t,e,a){},"9d36":function(t,e,a){},b8e7:function(t,e,a){"use strict";a.d(e,"a",function(){return r}),a.d(e,"b",function(){return c});var s=a("0c4b"),n=(a("612f"),a("b5ad"),a("b775")),i=a("c20c");function r(){return n["a"].get("users/onMyManage")}function c(t){return new Promise(function(e,a){Promise.all([Object(i["a"])(t),Object(i["b"])(t),Object(i["c"])(t),Object(i["d"])(t)]).then(function(t){var a=Object(s["a"])(t,4),n=a[0],i=a[1],r=a[2],c=a[3],l={base:n,company:i,duties:r,social:c};e(l)}).catch(a)})}},c20c:function(t,e,a){"use strict";a.d(e,"a",function(){return n}),a.d(e,"d",function(){return i}),a.d(e,"c",function(){return r}),a.d(e,"b",function(){return c});var s=a("b775");function n(t){return s["a"].get("users/base",{params:{id:t}})}function i(t){return s["a"].get("users/social",{params:{id:t}})}function r(t){return s["a"].get("users/duties",{params:{id:t}})}function c(t){return s["a"].get("users/company",{params:{id:t}})}},c9ee:function(t,e,a){"use strict";a.d(e,"d",function(){return n}),a.d(e,"f",function(){return i}),a.d(e,"g",function(){return r}),a.d(e,"j",function(){return c}),a.d(e,"a",function(){return l}),a.d(e,"i",function(){return o}),a.d(e,"h",function(){return d}),a.d(e,"m",function(){return u}),a.d(e,"l",function(){return p}),a.d(e,"c",function(){return f}),a.d(e,"e",function(){return v}),a.d(e,"k",function(){return b}),a.d(e,"b",function(){return m});var s=a("b775");function n(t){var e=t.id;return s["a"].get("/apply/fromUser",{params:{id:e}})}function i(t){return s["a"].post("/apply/BaseInfo",t)}function r(t){return s["a"].post("/apply/RequestInfo",t)}function c(t){return s["a"].post("/apply/Submit",t)}function l(t){return s["a"].delete("/apply/Submit",{id:t.id,Auth:t.Auth})}function o(t){return s["a"].put("/apply/Save?id="+t)}function d(t){return s["a"].put("/apply/Publish?id="+t)}function u(t){return s["a"].put("/apply/Withdrew?id="+t)}function p(t){return s["a"].get("/apply/toUser",{params:t})}function f(t){var e=t.code;return s["a"].get("/apply/fromCompany",{params:{code:e}})}function v(){return s["a"].get("/apply/allStatus")}function b(t){var e=t.code;return Object(s["a"])({url:"/apply/toCompany",method:"get",params:{code:e}})}function m(t){return Object(s["a"])("/apply/detail",{params:{id:t}})}}}]);